<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Monthly Expenses</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      padding: 20px;
    }
    form {
      background: #ffffff;
      padding: 20px;
      border-radius: 8px;
      max-width: 420px;
      margin: auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    label {
      font-weight: bold;
      margin-top: 10px;
      display: block;
    }
    input, select, button {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
    }
    .radio-group {
      display: flex;
      justify-content: space-around;
      margin-top: 10px;
    }
    .radio-group label {
      font-weight: normal;
    }
    button {
      margin-top: 15px;
      background: #007bff;
      color: white;
      border: none;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover {
      background: #0056b3;
    }
  </style>
</head>

<body>

<form id="expenseForm">
  <h2>Transaction Entry</h2>

  <!-- Date -->
  <label>Date</label>
  <input type="date" id="date" required>

  <!-- Narration -->
  <label>Narration</label>
  <input type="text" id="narration" placeholder="Description" required>

  <!-- Purpose -->
  <label>Purpose</label>
  <select id="Purpose" required>
    <option value="">Select</option>
    <option value="Business">Business</option>
    <option value="Donation">Donation</option>
    <option value="Entertainment">Entertainment</option>
    <option value="Food">Food</option>
    <option value="Furniture">Furniture</option>
    <option value="Grocery">Grocery</option>
    <option value="Hospital">Hospital</option>
    <option value="House">House</option>
    <option value="Income">Income</option>
    <option value="Insurance">Insurance</option>
    <option value="Loan">Loan</option>
    <option value="Medicines">Medicines</option>
    <option value="Miscellaneous">Miscellaneous</option>
    <option value="Puja">Puja</option>
    <option value="Tax">Tax</option>
    <option value="Serviece">Serviece</option>
    <option value="Travelling">Travelling</option>
    <option value="Utility Bills">Utility Bills</option>
    <option value="Vegitables">Vegitables</option>
    <option value="Vochers">Vochers</option>
    <option value="Water">Water</option>
    <option value="Other">Other</option>
  </select>

  <!-- Other Purpose -->
  <input
    type="text"
    id="otherPurpose"
    placeholder="Enter custom purpose"
    style="display:none;"
  >

  <!-- Deposit / Withdraw -->
  <label>Transaction Flow</label>
  <div class="radio-group">
    <label>
      <input type="radio" name="flow_type" value="deposit" required>
      Deposit
    </label>
    <label>
      <input type="radio" name="flow_type" value="withdraw">
      Withdraw
    </label>
  </div>

  <!-- Transaction Type -->
  <label>Transaction Type</label>
  <select id="trtype" required>
    <option value="">Select</option>
    <option value="cash">Cash</option>
    <option value="upi">UPI</option>
    <option value="net">Net Banking</option>
    <option value="debit">Debit</option>
    <option value="credit">Credit</option>
  </select>

  <!-- From / To -->
  <label id="fromToLabel" style="display:none;">From / To</label>
  <select id="from_to" style="display:none;"></select>

  <!-- Amount -->
  <label>Amount</label>
  <input type="number" id="amount" required>

  <button type="submit">Submit</button>
</form>

<script>
  const trtype = document.getElementById("trtype");
  const fromTo = document.getElementById("from_to");
  const fromToLabel = document.getElementById("fromToLabel");
  const purposeSelect = document.getElementById("Purpose");
  const otherPurposeInput = document.getElementById("otherPurpose");

  const bankAccounts = [
    "Axis", "HDFC Old", "HDFC New", "ICICI",
    "IndusInd", "Kotak", "RBL", "SBI"
  ];

  const creditCards = [
    "Axis Flipkart", "Axis MyZone", "Axis Neo",
    "HDFC PhonePe", "HDFC Tata Neu", "HDFC Millennia",
    "HSBC", "IDFC First Millenia",
    "ICICI Amazon", "ICICI Coral", "ICICI Expressions",
    "Indusind Plat Aura EDGE", "Indusind Legend",
    "Yes Finbooster", "Kotak League", "Kotak Image",
    "SBI BPCL", "Standard Chartered"
  ];

  /* Purpose Other handling */
  purposeSelect.addEventListener("change", () => {
    if (purposeSelect.value === "Other") {
      otherPurposeInput.style.display = "block";
      otherPurposeInput.required = true;
    } else {
      otherPurposeInput.style.display = "none";
      otherPurposeInput.required = false;
      otherPurposeInput.value = "";
    }
  });

  /* Transaction type handling */
  trtype.addEventListener("change", () => {
    fromTo.innerHTML = "";

    if (trtype.value === "cash") {
      fromTo.style.display = "none";
      fromToLabel.style.display = "none";
      fromTo.required = false;
      return;
    }

    fromTo.style.display = "block";
    fromToLabel.style.display = "block";
    fromTo.required = true;

    let options = [];
    if (["upi", "net", "debit"].includes(trtype.value)) options = bankAccounts;
    if (trtype.value === "credit") options = creditCards;

    const defaultOption = document.createElement("option");
    defaultOption.value = "";
    defaultOption.text = "Select";
    fromTo.appendChild(defaultOption);

    options.forEach(val => {
      const opt = document.createElement("option");
      opt.value = val;
      opt.text = val;
      fromTo.appendChild(opt);
    });
  });

  /* Submit */
  document.getElementById("expenseForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const flowType = document.querySelector('input[name="flow_type"]:checked').value;

    const purposeValue =
      purposeSelect.value === "Other"
        ? otherPurposeInput.value
        : purposeSelect.value;

    const data = {
      date: document.getElementById("date").value,
      narration: document.getElementById("narration").value,
      purpose: purposeValue,
      flow_type: flowType,
      trtype: trtype.value,
      from_to: trtype.value === "cash" ? "Cash" : fromTo.value,
      amount: document.getElementById("amount").value
    };

    try {
      await fetch("https://hook.eu1.make.com/uayw6m2h1u56gz1fuhnyewvh860q8tjy", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      alert("✅ Transaction saved successfully");
      document.getElementById("expenseForm").reset();
      fromTo.style.display = "none";
      fromToLabel.style.display = "none";
      otherPurposeInput.style.display = "none";
    } catch (err) {
      alert("❌ Error sending data");
      console.error(err);
    }
  });
</script>

</body>
</html>
